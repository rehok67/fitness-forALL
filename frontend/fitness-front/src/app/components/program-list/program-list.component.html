<div class="program-list-container">
  
  <!-- Header with Add Button and Auth -->
  <div class="page-header">
    <h2>ğŸ‹ï¸ Fitness ProgramlarÄ±</h2>
    <div class="header-actions">
      
      <!-- ADD PROGRAM BUTTON - SADECE AUTHENTICATED USER'LAR Ä°Ã‡Ä°N -->
      <button 
        *ngIf="isAuthenticated$ | async"
        class="add-program-btn" 
        (click)="openAddProgramModal()"
        [disabled]="loading"
        title="Yeni program oluÅŸtur"
      >
        â• Yeni Program Ekle
      </button>
      
      <!-- AUTHENTICATED USER MENU -->
      <div class="auth-section" *ngIf="isAuthenticated$ | async; else guestButtons">
        <div class="user-menu">
          <div class="user-info" *ngIf="currentUser$ | async as user">
            <span class="user-avatar">ğŸ‘¤</span>
            <div class="user-details">
              <span class="username">{{ user.username }}</span>
              <span class="user-email">{{ user.email }}</span>
            </div>
          </div>
          
          <div class="user-actions">
            <button class="user-btn profile-btn" title="Profil">
              âš™ï¸ Profil
            </button>
            <button class="user-btn logout-btn" (click)="logout()" title="Ã‡Ä±kÄ±ÅŸ Yap">
              ğŸšª Ã‡Ä±kÄ±ÅŸ
            </button>
            <!-- DEBUG BUTTON - Production'da kaldÄ±rÄ±lacak -->
            <button class="user-btn debug-btn" (click)="clearAuthState()" title="Auth Temizle (Debug)">
              ğŸ§¹ Debug Clear
            </button>
          </div>
        </div>
      </div>

      <!-- GUEST BUTTONS TEMPLATE -->
      <ng-template #guestButtons>
        <div class="auth-buttons">
          <a routerLink="/auth/login" class="auth-btn login-btn">
            ğŸ”‘ GiriÅŸ Yap
          </a>
          <a routerLink="/auth/register" class="auth-btn register-btn">
            ğŸ“ KayÄ±t Ol
          </a>
        </div>
      </ng-template>
      
    </div>
  </div>
  
  <!-- Search Filter Component -->
  <app-search-filter 
    (filterChange)="onFilterChange($event)"
    (clearFilters)="onClearFilters()"
  ></app-search-filter>
  
  <!-- Loading durumu -->
  <div *ngIf="loading" class="status-message loading">
    <span *ngIf="isFiltering">ğŸ” Programlar filtreleniyor...</span>
    <span *ngIf="!isFiltering">â³ Programlar yÃ¼kleniyor...</span>
  </div>
  
  <!-- Error durumu -->
  <div *ngIf="error" class="status-message error">
    âŒ {{ error }}
    <button (click)="loadPrograms()" class="retry-btn">ğŸ”„ Tekrar Dene</button>
  </div>
  
  <!-- Program listesi -->
  <div *ngIf="!loading && !error" class="programs-grid">
    <div 
      *ngFor="let program of programs; trackBy: trackByProgramId" 
      class="program-card"
      (click)="onProgramClick(program)"
    >
      <!-- Program baÅŸlÄ±ÄŸÄ± -->
      <h3 class="program-title">{{ program.title }}</h3>
      
      <!-- Program bilgileri -->
      <div class="program-info">
        <div class="info-item">
          <span class="label">âš¡ Ekipman:</span>
          <span class="value">{{ program.equipment }}</span>
        </div>
        
        <div class="info-item">
          <span class="label">â° SÃ¼re:</span>
          <span class="value">{{ program.timePerWorkout }} dakika</span>
        </div>
        
        <div class="info-item">
          <span class="label">ğŸ“… Program:</span>
          <span class="value">{{ program.programLength }} hafta</span>
        </div>
        
        <div class="info-item">
          <span class="label">ğŸ¯ Seviye:</span>
          <span class="value">{{ program.levels.join(', ') }}</span>
        </div>
      </div>
      
      <!-- AÃ§Ä±klama (kÄ±saltÄ±lmÄ±ÅŸ) -->
      <p class="program-description">
        {{ program.description.substring(0, 100) }}...
      </p>
      
      <!-- Click indicator -->
      <div class="click-indicator">
        ğŸ‘† Detaylar iÃ§in tÄ±kla
      </div>
    </div>
  </div>
  
  <!-- Program sayÄ±sÄ± ve filtreleme durumu -->
  <div *ngIf="programs.length > 0" class="programs-count">
    <span *ngIf="!isFiltering">ğŸ“Š Toplam {{ programs.length }} program bulundu</span>
    <span *ngIf="isFiltering">ğŸ¯ {{ programs.length }} program filtreleme sonucu bulundu</span>
  </div>
  
  <!-- Filtreleme sonucu boÅŸ -->
  <div *ngIf="programs.length === 0 && !loading && !error && isFiltering" class="no-results">
    <div class="no-results-content">
      <div class="no-results-icon">ğŸ”</div>
      <h3>AradÄ±ÄŸÄ±nÄ±z kriterlere uygun program bulunamadÄ±</h3>
      <p>Filtreleri gevÅŸeterek tekrar deneyin veya tÃ¼m programlarÄ± gÃ¶rÃ¼ntÃ¼leyin.</p>
    </div>
  </div>

  <!-- Add Program Component (Modal) - SADECE AUTHENTICATED USER'LAR Ä°Ã‡Ä°N -->
  <app-add-program 
    *ngIf="isAuthenticated$ | async"
    (programAdded)="onProgramAdded()"
  ></app-add-program>

</div> 